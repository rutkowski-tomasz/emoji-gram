@KeyCloak_HostAddress = http://localhost:8080
@Api_HostAddress = http://localhost:8001


# @name adminToken
POST {{KeyCloak_HostAddress}}/realms/master/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=admin-cli&username=admin&password=admin

### 

# @name register_user1
POST {{KeyCloak_HostAddress}}/admin/realms/myrealm/users
Content-Type: application/json
Authorization: Bearer {{adminToken.response.body.access_token}}

{
  "username": "user1",
  "email": "user1@example.com",
  "enabled": true,
  "credentials": [
    {
      "type": "user1",
      "value": "user1",
      "temporary": false
    }
  ]
}

### 

# @name register_user2
POST {{KeyCloak_HostAddress}}/admin/realms/myrealm/users
Content-Type: application/json
Authorization: Bearer {{adminToken.response.body.access_token}}

{
  "username": "user2",
  "email": "user2@example.com",
  "enabled": true,
  "credentials": [
    {
      "type": "user2",
      "value": "user2",
      "temporary": false
    }
  ]
}

###

# @name login
POST {{KeyCloak_HostAddress}}/realms/myrealm/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=password&client_id=myclient&username=user1&password=user1

###

# @name broadcast
POST {{Api_HostAddress}}/broadcast
Content-Type: application/json
Authorization: Bearer {{login.response.body.access_token}}

{
  "message": "üßëüèª‚ÄçüöÄ"
}

###

# @name history
GET {{Api_HostAddress}}/history
Authorization: Bearer {{login.response.body.access_token}}
